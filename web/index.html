<!DOCTYPE html>
<html lang="fr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,
            maximum-scale=1.0" />
    <title>PortalFr</title>
    <script src="renderer.js"></script>
    <!-- CSS  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        @media (prefers-color-scheme: dark) {
            body {
                background: #333;
                color: white;
            }
        }
        
        @media (prefers-color-scheme: light) {
            body {
                background: rgb(88, 80, 80);
                color: black;
            }
        }
        
        .footerr {
            color: #FF0000;
        }
        
        .white {
            color: rgb(248, 247, 247);
        }
        
        footer {
            display: table-row;
            height: 10px;
            /* Ã  titre d'exemple */
        }
        
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: black;
            display: table;
            width: 100%;
        }
    </style>
    <script src="renderer.js"></script>
<button id="closespan" onclick="close()">TEST</button>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="./index.html">PortalAudio</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="./index.html">Audioplayer
                            <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>
</head>

<body>

    <br>
    <br>
    <div class="progress" style="height: 40px;">
        <div id="progressbarete" class="progress-bar progress-bar-striped
                progress-bar-animated bg-danger" role="progressbar" style="width: 100%" aria-valuemin="0" aria-valuemax="javascript:audio.seekable.end()"></div>
    </div>
    <br>
    <br>

    <a onclick="play()" id="modifier_classblue" class="btn btn-info btn-lg">Play</a>
    <a onclick="pause()" id="modifier_classred" class="btn btn-danger
            btn-lg">Pause</a>
    <br>
    <br>
    <H5 class="white text-center" id='temptotal'>Temps Total: Pas de Musique en attente
        <H5>
            <H5 class="white text-center" id='tempmaintenant'>Temps en ce moment: Pas de Musique en attente
                <H5>

                    <br>
                    <ul class="text-left" style="list-style: none">
                        <li>
                            <ul id="list">
                                <div class="container">
                                    <div class="section">

                                        <div class="col s12 m4">
                                            <div class="icon-block">

                                                <a id="0" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal2end.mp3">Portal
                                                        end</a>
                                                <a id="1" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal1.mp3">Portal
                                                        1</a>
                                                <a id="2" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal2.mp3">Portal
                                                        2</a>
                                                <a id="3" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal3.mp3">Portal
                                                        3</a>
                                                <a id="4" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal4.mp3">Portal
                                                        4</a>
                                                <a id="5" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal5.mp3">Portal
                                                        5</a>

                                            </div>
                                        </div>

                                        <br>

                                        <div class="col s12 m4">
                                            <div class="icon-block">

                                                <a id="6" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal6.mp3">Portal
                                                        6</a>
                                                <a id="7" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal7.mp3">Portal
                                                        7</a>
                                                <a id="8" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal8.mp3">Portal
                                                        8</a>
                                                <a id="9" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal9.mp3">Portal
                                                        9</a>
                                                <a id="10" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal10.mp3">Portal
                                                        10</a>

                                            </div>
                                        </div>

                                        <br>

                                        <div class="col s12 m4">
                                            <div class="icon-block">

                                                <a id="11" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal11.mp3">Portal
                                                        11</a>
                                                <a id="12" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal12.mp3">Portal
                                                        12</a>
                                                <a id="13" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal13.mp3">Portal
                                                        13</a>
                                                <a id="14" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal15.mp3">Portal
                                                        15</a>
                                                <a id="15" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal14.mp3">Portal
                                                        14</a>


                                            </div>
                                        </div>

                                        <br>

                                        <div class="col s12 m4">
                                            <div class="icon-block">

                                                <a id="16" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal16.mp3">Portal
                                                        16</a>
                                                <a id="17" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal17.mp3">Portal
                                                        17</a>
                                                <a id="18" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal18.mp3">Portal
                                                        18</a>
                                                <a id="19" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal19.mp3">Portal
                                                        19</a>
                                                <a id="20" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal20.mp3">Portal
                                                        20</a>

                                            </div>
                                        </div>

                                        <br>

                                        <div class="col s12 m4">
                                            <div class="icon-block">

                                                <a id="21" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal21.mp3">Portal
                                                        21</a>
                                                <a id="22" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal22.mp3">Portal
                                                        22</a>
                                                <a id="23" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal23.mp3">Portal
                                                        23</a>
                                                <a id="24" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal24.mp3">Portal
                                                        24</a>
                                                <a id="25" class="btn
                                                        btn-primary" aria-disabled="true" tabindex="-1" role="button" data-value="./Portal25.mp3">Portal
                                                        25</a>


                                            </div>
                                        </div>


                                        <br><br>
                                    </div>
                                </div>
                            </ul>
                        </li>
                    </ul>


                    <audio id="player" controls="controls" ontimeupdate="initProgressBar()" hidden>
                            <source id="audioSource"
                                src="./Portal1.mp3">
                            Your browser does not support the audio format.
                        </audio>
                    </ul>



                    <footer class="text-center">


                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="./index.html">Accueil</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Audioplayer</li>
                                <li id="nomportal" class="breadcrumb-item
                                    active" aria-current="page">Portal ??</li>
                                <li id="playno" onclick="test()" class="breadcrumb-item active" aria-current="page">Play Ou Pause</li>
                                <li id="musiquefinioupas" class="breadcrumb-item
                                    active" aria-current="page">Tu n'a pas lancÃ© de musique</li>
                            </ol>
                        </nav>
                        <br>
                        <p>Current theme source: <strong id="theme-source">System</strong></p>

                        <p class="footerr">CrÃ©e par ToniPortal</p>
                    </footer>


                    <script>
                        function conversion_seconde_heure(time) {
                            var addZero = function(v) {
                                return v < 10 ? '0' + v : v;
                            };
                            var d = new Date(time * 1000); // js fonctionne en milisecondes
                            var t = [];
                            t.push(addZero(d.getHours() - 1));
                            t.push(addZero(d.getMinutes()));
                            t.push(addZero(d.getSeconds()));
                            return t.join(':');
                        }

                        function initProgressBar() {



                            var audio = document.querySelector('#player')

                            document.getElementById('tempmaintenant').innerHTML = "Temps en ce moment: Chargement... "
                            document.getElementById('musiquefinioupas').innerHTML = "Chargement... ";
                            document.getElementById('temptotal').innerHTML = "Temps Total: Chargement... ";

                            if (audio.currentTime > 0) {
                                document.getElementById('musiquefinioupas').innerHTML = "La musique est pas finie";

                                document.getElementById('tempmaintenant').innerHTML = "Temps en ce moment:" + conversion_seconde_heure(audio.currentTime);

                                document.getElementById('temptotal').innerHTML = "Temps Total:" + conversion_seconde_heure(audio.duration);
                                value = Math.floor((100 / audio.duration) * audio.currentTime);
                                progressbarete.style.width = value + "%";
                            }

                            if (audio.currentTime == audio.duration) {
                                document.getElementById('musiquefinioupas').innerHTML = "La musique est finie";
                                progressbarete.style.width = "0%";
                                document.getElementById('tempmaintenant').innerHTML = "Temps en ce moment: Pas de Musique en attente";
                                document.getElementById('temptotal').innerHTML = "Temps Total: Pas de Musique en attente";
                            }
                        };


                        function test() {


                            if (ddd == "Play") {
                                console.log("PLAY")
                            } else {
                                console.log("ELSE")
                            }

                        }

                        function play() {

                            document.getElementById('playno').innerHTML = "Play";

                            var audio = document.getElementById('player');
                            audio.play();
                        }

                        function pause() {
                            document.getElementById('playno').innerHTML = "Pause";
                            var audio = document.getElementById('player');

                            audio.pause();
                        }

                        list.onclick = function(e) {

                            e.preventDefault();

                            var elm = e.target;
                            var audio = document.getElementById('player');

                            var source = document.getElementById('audioSource');
                            source.src = elm.getAttribute('data-value');
                            ide = elm.getAttribute('id');
                            console.log(ide)
                            audio.load(); //call this to just preload the audio without playing
                            audio.play(); //call this to play the song right away
                            if (ide == "0") {
                                document.getElementById('playno').innerHTML = "Play";
                                document.getElementById('nomportal').innerHTML = "Portal 2 End Song";

                            } else {
                                if (ide == "list") {

                                    setTimeout(() => {
                                        document.getElementById('tempmaintenant').innerHTML = "Temps en ce moment: Pas de Musique en attente";
                                        document.getElementById('temptotal').innerHTML = "Temps Total: Pas de Musique en attente";
                                        document.getElementById('musiquefinioupas').innerHTML = "Il y a pas de musique";
                                    }, 10)

                                    progressbarete.style.width = "0%";
                                    document.getElementById('playno').innerHTML = "Pause";
                                    document.getElementById('nomportal').innerHTML = "Portal ???";


                                } else {

                                    document.getElementById('playno').innerHTML = "Play";
                                    document.getElementById('nomportal').innerHTML = "Portal Song " + ide;

                                }


                            }


                        };
                    </script>
                    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>

</html>